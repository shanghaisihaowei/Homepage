"use strict";(self["webpackChunktemplates"]=self["webpackChunktemplates"]||[]).push([[352],{5760:(e,t,l)=>{l.r(t),l.d(t,{default:()=>z});var s=l(3673),i=l(2323),o=l(8880);const n=e=>((0,s.dD)("data-v-c5a5f3fe"),e=e(),(0,s.Cn)(),e),a={class:"text-h6 q-mb-sm"},d={class:"text-h6"},p={class:"text-h6 q-mb-sm"},u={style:{color:"#999999"}},r={class:"flex"},m=n((()=>(0,s._)("div",{class:"bg-grey-3 text-body1",style:{width:"70px",height:"40px","line-height":"40px","text-align":"center",color:"#999999","margin-left":"-12px"}}," V ",-1))),h={class:"text-body2",style:{color:"#999999"}},c={class:"text-h6 q-mb-sm"};function _(e,t,l,n,_,w){const v=(0,s.up)("q-btn"),g=(0,s.up)("q-card"),f=(0,s.up)("q-input"),y=(0,s.up)("q-card-section"),b=(0,s.up)("timeline"),x=(0,s.up)("q-select"),V=(0,s.up)("markdown-aditor"),$=(0,s.up)("upload-file");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(g,{square:"",flat:"",style:{color:"#999999"},class:"bottom_border q-py-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"text-body1",onClick:t[0]||(t[0]=e=>this.$router.go(-1)),flat:""},{default:(0,s.w5)((()=>[(0,s.Uk)(" <"+(0,i.zw)(e.$t("community.e_shop_view.back")),1)])),_:1})])),_:1}),(0,s.Wm)(g,{square:"",flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("div",a,(0,i.zw)(e.$t("community.e_shop_view.plugin_name"))+"： ",1),(0,s.Wm)(f,{modelValue:_.pluginName,"onUpdate:modelValue":t[1]||(t[1]=e=>_.pluginName=e),disable:"",outlined:"",dense:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("div",d,(0,i.zw)(e.$t("community.e_shop_view.update_record"))+"： ",1),(0,s.Wm)(b,{timeline:_.timelineList},null,8,["timeline"])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s.Uk)((0,i.zw)(e.$t("community.e_shop_view.plugin_versions"))+"：",1),(0,s._)("span",u,(0,i.zw)(e.$t("community.e_shop_view.example")),1)]),(0,s._)("div",r,[(0,s.Wm)(f,{style:{flex:"1"},modelValue:_.pluginVersions,"onUpdate:modelValue":t[2]||(t[2]=e=>_.pluginVersions=e),outlined:"",dense:"",onFocus:t[3]||(t[3]=e=>this.showVersionsPholder=!1),onBlur:t[4]||(t[4]=e=>{this.pluginVersions||(this.showVersionsPholder=!0)})},{prepend:(0,s.w5)((()=>[m])),default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",{style:{"line-height":"40px",height:"40px",position:"absolute",left:"0px",cursor:"text",color:"#999999"}},(0,i.zw)(e.$t("community.e_shop_view.placeholder_versions")),513),[[o.F8,_.showVersionsPholder]])])),_:1},8,["modelValue"]),(0,s.Wm)(x,{style:{width:"200px"},class:"q-ml-md",dense:"",outlined:"",modelValue:_.versionsType,"onUpdate:modelValue":t[5]||(t[5]=e=>_.versionsType=e),options:_.versionsOptions},{prepend:(0,s.w5)((()=>[(0,s._)("div",h,(0,i.zw)(e.$t("community.e_shop_view.versions_type"))+"： ",1)])),_:1},8,["modelValue","options"])])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("div",c,(0,i.zw)(e.$t("community.e_shop_view.update_explain"))+": ",1),(0,s.Wm)(V,{placeholder:_.placeholder_update,onGetMarkdownHtml:w.getMarkdownHtml},null,8,["placeholder","onGetMarkdownHtml"])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)($,{onGetUploadFile:w.getUploadFile},null,8,["onGetUploadFile"])])),_:1}),(0,s.Wm)(y,{class:"text-center q-mt-lg",style:{"padding-bottom":"50px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:(0,i.C_)(w.disable_update?"update_btn_disabled":"update_btn_undisabled"),unelevated:"",disable:w.disable_update,onClick:w.submitUpdate},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("community.e_shop_view.update")),1)])),_:1},8,["class","disable","onClick"])])),_:1})])),_:1})])}var w=l(3746),v=l(5330),g=l(975),f=l(5474);const y={components:{Timeline:w.Z,UploadFile:v.Z,MarkdownAditor:g.Z},data(){return{pluginName:"",pluginId:"",pluginVersions:"",updateNotes:"",showPlaceholder:!0,showVersionsPholder:!0,timelineList:"",file:"",versionsType:"",versionsOptions:[this.$t("community.e_shop_view.official_version"),this.$t("community.e_shop_view.beta_version")],placeholder_update:`<div style='color:#999999'>${this.$t("community.e_shop_view.placeholder_update")}</div>`}},computed:{disable_update(){return!(this.file&&this.pluginVersions&&this.versionsType&&this.updateNotes)}},methods:{getPluginDetail(){(0,f.get)("software/api/v1/softwaregetret/"+this.pluginId+"/").then((e=>{this.pluginName=e.name,this.timelineList=e.versions}))},getMarkdownHtml(e){this.updateNotes=e},getUploadFile(e){this.file=e},setUpdateFormData(){let e=new FormData;return e.append("source_code_file",this.file),e.append("version",`V${this.pluginVersions}`),e.append("plugin_instructions",this.updateNotes),e.append("version_type",this.versionsType),e},submitUpdate(){(0,f.putauth)(`software/api/v1/add/${this.pluginId}/`,this.setUpdateFormData()).then((e=>{this.$router.push({path:"/community/myReleasedPlugins"})}))}},created(){this.pluginId=this.$route.params.id,document.body.scrollTop=0,this.getPluginDetail()}};var b=l(4260),x=l(151),V=l(2165),$=l(5589),k=l(4842),W=l(9396),U=l(7518),q=l.n(U);const F=(0,b.Z)(y,[["render",_],["__scopeId","data-v-c5a5f3fe"]]),z=F;q()(y,"components",{QCard:x.Z,QBtn:V.Z,QCardSection:$.Z,QInput:k.Z,QSelect:W.Z})}}]);