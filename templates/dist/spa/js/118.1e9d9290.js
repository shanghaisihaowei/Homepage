"use strict";(self["webpackChunktemplates"]=self["webpackChunktemplates"]||[]).push([[118],{4019:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var s=a(3673),r=a(2323),o=a(8880);const i=e=>((0,s.dD)("data-v-16bc37a4"),e=e(),(0,s.Cn)(),e),l={class:"bg-white",style:{clolr:"#333333","min-height":"calc(80vh)"}},n={class:"col-6"},d={class:"col-2 text-center"},c={class:"col-2 text-center"},m={class:"col-2 text-center"},u=["onClick"],p={class:"background-grey q-pa-md q-mt-lg"},g={class:"q-ml-xl",style:{color:"#999999"}},y={class:"bottom_border row q-px-md"},_={class:"plugins_list col-6",style:{"font-weight":"500"}},h={class:"plugins_list col-2 text-center",style:{"border-left":"1px solid #dcdcdc"}},w={class:"plugins_list col-2 text-center",style:{borderLeft:"1px solid #dcdcdc",color:""}},f=["href","onClick"],x={key:1,class:"plugins_list col-2 text-center",style:{"border-left":"1px solid #dcdcdc",color:"#999999"}},b={key:0,class:"q-pa-md flex bg-white flex-center"},k={key:1,class:"flex flex-center q-mt-lg"},v=(0,s.Uk)("no more data"),q={key:2,style:{"margin-top":"20%"}},z=i((()=>(0,s._)("div",{class:"flex flex-center"},[(0,s._)("img",{src:"statics/community/default_page.svg"})],-1))),$={class:"q-pa-md flex flex-center default_page"};function P(e,t,a,i,P,D){const C=(0,s.up)("q-tab"),W=(0,s.up)("q-tabs"),L=(0,s.up)("q-card-section"),O=(0,s.up)("q-pagination"),Z=(0,s.up)("q-btn"),V=(0,s.up)("q-card"),M=(0,s.up)("pay-dialog");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(V,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{modelValue:P.plugin_order,"onUpdate:modelValue":t[0]||(t[0]=e=>P.plugin_order=e),align:"left","narrow-indicator":"","indicator-color":"blue","inline-label":"",style:{"font-size":"20px","font-weight":"500"},class:"q-py-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{name:"GreaterWMS","no-caps":""},{default:(0,s.w5)((()=>[(0,s._)("span",null,(0,r.zw)(e.$t("community.greaterwms"))+(0,r.zw)(e.$t("community.myorder.order")),1)])),_:1}),(0,s.Wm)(C,{name:"DVAdmin","no-caps":""},{default:(0,s.w5)((()=>[(0,s._)("span",null,(0,r.zw)(e.$t("community.dvadmin"))+(0,r.zw)(e.$t("community.myorder.order")),1)])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(L,{class:"background-grey row",style:{"font-size":"18px"}},{default:(0,s.w5)((()=>[(0,s._)("span",n,(0,r.zw)(e.$t("community.myorder.order_detail")),1),(0,s._)("span",d,(0,r.zw)(e.$t("community.myorder.amount")),1),(0,s._)("span",c,(0,r.zw)(e.$t("community.myorder.status")),1),(0,s._)("span",m,(0,r.zw)(e.$t("community.myorder.operation")),1)])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(P.myOrdersList,(t=>((0,s.wg)(),(0,s.iD)("div",{style:{"font-size":"16px",cursor:"pointer"},key:t.order_id,onClick:e=>this.$router.push(`/community/orderDetail/${t.order_id}`)},[(0,s._)("div",p,[(0,s._)("span",null,(0,r.zw)(t.order_id),1),(0,s._)("span",g,(0,r.zw)(e.$t("community.myorder.buy_time"))+"："+(0,r.zw)(t.pay_time),1)]),(0,s._)("div",y,[(0,s._)("span",_,(0,r.zw)(t.title),1),(0,s._)("span",h,(0,r.zw)(t.total_amount),1),(0,s._)("span",w,(0,r.zw)(t.status),1),"已支付"==t.status?((0,s.wg)(),(0,s.iD)("a",{key:0,href:D.downloadUrl,onClick:(0,o.iM)((e=>this.pluginId=t.software),["stop"]),class:"plugins_list col-2 text-center",style:{"border-left":"1px solid #dcdcdc",color:"#116fec"}},(0,r.zw)(e.$t("community.e_shop_view.download")),9,f)):(0,s.kq)("",!0),"已支付"!=t.status?((0,s.wg)(),(0,s.iD)("span",x,(0,r.zw)(e.$t("community.myorder.pre_buy")),1)):(0,s.kq)("",!0)])],8,u)))),128)),(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[P.hasPagination?((0,s.wg)(),(0,s.iD)("div",b,[(0,s.Wm)(O,{class:"q_pagination","direction-links":"",modelValue:P.currentPage,"onUpdate:modelValue":t[1]||(t[1]=e=>P.currentPage=e),max:P.maxPages,"max-pages":6},null,8,["modelValue","max"])])):(0,s.kq)("",!0),!P.hasPagination&&P.myOrdersList.length?((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Wm)(Z,{flat:""},{default:(0,s.w5)((()=>[v])),_:1})])):(0,s.kq)("",!0),P.myOrdersList.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",q,[z,(0,s._)("div",$,(0,r.zw)(e.$t("community.myAccount_view.my_orders")),1)]))])),_:1})])),_:1}),(0,s.Wm)(M,{ref:"dialog"},null,512)])}var D=a(5474),C=a(4403);const W={components:{PayDialog:C.Z},data(){return{plugin_order:"GreaterWMS",myOrdersList:[],currentPage:1,maxPages:1,hasPagination:!1,pluginId:"",order_type:""}},computed:{downloadUrl(){return`${window.g.BaseUrl}software/api/v1/downzip/`+this.pluginId+"/?token="+this.$q.cookies.get("token")}},watch:{currentPage(e){this.redirectPage(e)},plugin_order:{handler(e){this.order_type="GreaterWMS"===e?"0":"1",this.getOrderList(this.order_type)},immediate:!0}},methods:{getOrderList(e){(0,D.getauth)("order/api/v1/my_order/?affiliation="+e).then((e=>{this.setOrdersList(e),e.count&&(this.maxPages=Math.ceil(e.count/20))}))},setOrdersList(e){this.myOrdersList=e.results,e.next||e.previous?this.hasPagination=!0:this.hasPagination=!1},redirectPage(e){(0,D.getauth)(`order/api/v1/my_order/?affiliation=${this.order_type}&page=${e}`).then((e=>{this.setOrdersList(e),document.getElementsByClassName("q-scrollarea__container")[0].scrollTop=0}))}},mounted(){this.$store.dispatch("bbsChange/isIndexMenu",!1),this.$store.dispatch("bbsChange/link","order"),-1!=location.href.indexOf("out_trade_no")&&(this.$refs.dialog.closeDialogTime(),location.href=location.href.split("?")[0])}};var L=a(4260),O=a(151),Z=a(7547),V=a(3269),M=a(5589),Q=a(7300),U=a(2165),I=a(7518),S=a.n(I);const T=(0,L.Z)(W,[["render",P],["__scopeId","data-v-16bc37a4"]]),B=T;S()(W,"components",{QCard:O.Z,QTabs:Z.Z,QTab:V.Z,QCardSection:M.Z,QPagination:Q.Z,QBtn:U.Z})}}]);