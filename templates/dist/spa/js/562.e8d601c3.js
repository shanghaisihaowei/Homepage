"use strict";(self["webpackChunktemplates"]=self["webpackChunktemplates"]||[]).push([[562],{7562:(e,n,s)=>{s.r(n),s.d(n,{default:()=>ae});s(71);var t=s(3673),l=s(2323),o=s(8880);const i=e=>((0,t.dD)("data-v-3838325c"),e=e(),(0,t.Cn)(),e),a={class:"row my-font"},c={class:"col-1 text-h6 my-font"},r=i((()=>(0,t._)("div",{class:"col-1"},null,-1))),d={class:"col-4 row"},u=i((()=>(0,t._)("div",{class:"col-2"},null,-1))),_={class:"col-1 row"},p={class:"col-1"},h={key:0,class:"col-1 flex flex-center"},m={style:{"letter-spacing":"10px"}},g={key:1,class:"col-2 flex flex-center"},f=i((()=>(0,t._)("div",{class:"col-1"},null,-1))),v={class:"col-1 row"},w={class:"col-1"},y={key:0,class:"col-1 flex flex-center"},k={style:{"letter-spacing":"10px"}},$={key:1,class:"col-2 flex flex-center"},b=i((()=>(0,t._)("div",{class:"col-1"},null,-1))),q={class:"col-1 row"},x=i((()=>(0,t._)("div",{class:"col-2"},null,-1))),C={class:"col-1 text-h6 my-font"},z=i((()=>(0,t._)("div",{class:"col-2"},null,-1))),S={class:"col-2 row"},W=i((()=>(0,t._)("div",{class:"col-1"},null,-1))),B={class:"col-1"},V=i((()=>(0,t._)("div",{class:"col-1"},null,-1))),F={class:"col-2 row"},U=i((()=>(0,t._)("div",{class:"col-1"},null,-1))),Z={class:"col-1"},E=i((()=>(0,t._)("input",{placeholder:"********",readonly:"readonly",type:"password",class:"col-3 per_input",style:{height:"34px"}},null,-1))),D=i((()=>(0,t._)("div",{class:"col-1"},null,-1))),I={class:"col-2 row"},P=i((()=>(0,t._)("div",{class:"col-2"},null,-1))),Q={class:"change_tip"},j={class:"verify_tit"},M={class:"row"},R={class:"col-8"},K={class:"col-4"},O={class:"nwePsd_tit"},A={class:"nwePsd_tit"};function J(e,n,s,i,J,N){const G=(0,t.up)("q-img"),H=(0,t.up)("q-avatar"),L=(0,t.up)("q-btn"),Y=(0,t.up)("q-card-section"),T=(0,t.up)("q-card"),X=(0,t.up)("q-input"),ee=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",a,[(0,t.Wm)(T,{class:"col-12 column q-pa-md",style:{height:"770px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{class:"col-7 column",style:{"border-bottom":"1px #E6E6E6 solid"}},{default:(0,t.w5)((()=>[(0,t._)("div",c,(0,l.zw)(e.$t("community.per_info")),1),r,(0,t._)("div",d,[u,(0,t.Wm)(H,{style:{cursor:"pointer"},size:"120px",onClick:n[0]||(n[0]=n=>e.click_avatar())},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{width:"120px",height:"120px",src:e.icon},null,8,["src"])])),_:1}),(0,t.wy)((0,t._)("input",{onChange:n[1]||(n[1]=(...n)=>e.search&&e.search(...n)),ref:"fileRef",type:"file"},null,544),[[o.F8,!1]])]),(0,t._)("div",_,[(0,t.wy)((0,t._)("div",p,null,512),[[o.F8,"zh-hans"===e.lange]]),"zh-hans"===e.lange?((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("span",m,(0,l.zw)(e.$t("community.nick")),1)])):(0,t.kq)("",!0),"zh-hans"!==e.lange?((0,t.wg)(),(0,t.iD)("div",g,[(0,t._)("span",null,(0,l.zw)(e.$t("community.nick")),1)])):(0,t.kq)("",!0),(0,t.wy)((0,t._)("input",{onInput:n[2]||(n[2]=n=>e.length_name=e.personal_center.nickname.length),"onUpdate:modelValue":n[3]||(n[3]=n=>e.personal_center.nickname=n),class:"col-3 per_input",maxlength:"16",onFocus:n[4]||(n[4]=n=>e.show_name_len()),onBlur:n[5]||(n[5]=n=>e.show_ln=!1)},null,544),[[o.nr,e.personal_center.nickname]]),(0,t.wy)((0,t._)("span",{class:"q-pa-sm content_font"},(0,l.zw)(e.length_name)+"/16 ",513),[[o.F8,!0===e.show_ln]])]),f,(0,t._)("div",v,[(0,t.wy)((0,t._)("div",w,null,512),[[o.F8,"zh-hans"===e.lange]]),"zh-hans"===e.lange?((0,t.wg)(),(0,t.iD)("div",y,[(0,t._)("span",k,(0,l.zw)(e.$t("community.self_intro")),1)])):(0,t.kq)("",!0),"zh-hans"!==e.lange?((0,t.wg)(),(0,t.iD)("div",$,(0,l.zw)(e.$t("community.self_intro")),1)):(0,t.kq)("",!0),(0,t.wy)((0,t._)("input",{onInput:n[6]||(n[6]=n=>e.length_intro=e.personal_center.intro.length),"onUpdate:modelValue":n[7]||(n[7]=n=>e.personal_center.intro=n),class:"col-6 per_input",maxlength:"100",onFocus:n[8]||(n[8]=n=>e.show_intro_len()),onBlur:n[9]||(n[9]=n=>e.show_li=!1)},null,544),[[o.nr,e.personal_center.intro]]),(0,t.wy)((0,t._)("span",{class:"q-pa-sm content_font"},(0,l.zw)(e.length_intro)+"/100 ",513),[[o.F8,!0===e.show_li]])]),b,(0,t._)("div",q,[x,(0,t.Wm)(L,{unelevated:"",style:{width:"100px",height:"34px",background:"#116FEC",color:"white"},onClick:n[10]||(n[10]=n=>e.modifyPreinfo())},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.$t("index.save")),1)])),_:1})])])),_:1}),(0,t.Wm)(Y,{class:"col-5 column"},{default:(0,t.w5)((()=>[(0,t._)("div",C,(0,l.zw)(e.$t("community.act_psd")),1),z,(0,t._)("div",S,[W,(0,t._)("div",B,(0,l.zw)(e.$t("community.emails")),1),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":n[11]||(n[11]=n=>e.personal_center.email=n),readonly:"readonly",class:"col-3 per_input",style:{height:"34px",background:"#f1f1f1"}},null,512),[[o.nr,e.personal_center.email]])]),V,(0,t._)("div",F,[U,(0,t._)("div",Z,(0,l.zw)(e.$t("community.passwords")),1),E]),D,(0,t._)("div",I,[P,(0,t.Wm)(L,{unelevated:"",style:{width:"100px",height:"34px",background:"#116FEC",color:"white"},onClick:n[12]||(n[12]=n=>e.psd_changedia=!0)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.$t("community.change_psd")),1)])),_:1})])])),_:1})])),_:1})]),(0,t.Wm)(ee,{modelValue:e.psd_changedia,"onUpdate:modelValue":n[22]||(n[22]=n=>e.psd_changedia=n)},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{class:"psd_changedia"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{style:{"border-bottom":"1px #E4E4E4 solid"}},{default:(0,t.w5)((()=>[(0,t._)("span",Q,(0,l.zw)(e.$t("community.change_psd")),1),(0,t.Wm)(L,{unelevated:"",icon:"close",style:{width:"16px",height:"16px",float:"right"},onClick:n[13]||(n[13]=n=>e.psd_changedia=!1)})])),_:1}),(0,t.Wm)(Y,null,{default:(0,t.w5)((()=>[(0,t._)("div",j,(0,l.zw)(e.$t("community.receive_code")),1),(0,t._)("div",M,[(0,t._)("div",R,[(0,t.Wm)(X,{class:"verify_inp",dense:"",modelValue:e.ver_code,"onUpdate:modelValue":n[14]||(n[14]=n=>e.ver_code=n),outlined:"",rules:[n=>6===n.length||e.v_code],onKeyup:n[15]||(n[15]=n=>e.getSubBtn())},null,8,["modelValue","rules"])]),(0,t._)("div",K,[!1===e.isverify?((0,t.wg)(),(0,t.j4)(L,{key:0,class:"send_verBtn",flat:"",label:e.svc,onClickOnce:n[16]||(n[16]=n=>e.getcpsd_ver())},null,8,["label"])):(0,t.kq)("",!0),!0===e.isverify?((0,t.wg)(),(0,t.j4)(L,{key:1,class:"send_verBtn2",flat:"",label:e.effective_time},null,8,["label"])):(0,t.kq)("",!0)]),(0,t.wy)((0,t._)("div",{class:"verify_msg"},(0,l.zw)(e.$t("community.sended_email")),513),[[o.F8,!0===e.isverify]])]),(0,t._)("div",O,(0,l.zw)(e.$t("community.newpsd")),1),(0,t.Wm)(X,{οnpaste:"return false",type:"password",dense:"",modelValue:e.new_psd,"onUpdate:modelValue":n[17]||(n[17]=n=>e.new_psd=n),outlined:"",style:{"margin-top":"10px"},rules:[n=>n.length>=8||e.less_eight],onKeyup:n[18]||(n[18]=n=>e.getSubBtn())},null,8,["modelValue","rules"]),(0,t._)("div",A,(0,l.zw)(e.$t("community.agenpsd")),1),(0,t.Wm)(X,{onpaste:"return false",type:"password",dense:"",modelValue:e.confirm_psd,"onUpdate:modelValue":n[19]||(n[19]=n=>e.confirm_psd=n),outlined:"",style:{"margin-top":"10px"},rules:[n=>n===e.new_psd||e.psd_dif],onKeyup:n[20]||(n[20]=n=>e.getSubBtn())},null,8,["modelValue","rules"]),!0===e.isBtnok?((0,t.wg)(),(0,t.j4)(L,{key:0,flat:"",class:"push_btn",label:e.submit,onClick:n[21]||(n[21]=n=>e.change_subPsd())},null,8,["label"])):(0,t.kq)("",!0),!1===e.isBtnok?((0,t.wg)(),(0,t.j4)(L,{key:1,flat:"",class:"push_btn_less",label:e.submit},null,8,["label"])):(0,t.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}s(2100);var N=s(5474),G=s(51);const H=(0,t.aZ)({data(){return{submit:this.$t("index.submit"),svc:this.$t("community.send_verify_code"),effective_time:this.$t("index.efficient"),psd_dif:this.$t("community.inconsistent"),less_eight:this.$t("community.less_eight"),v_code:this.$t("community.v_code"),isverify:!1,confirm_psd:"",ver_code:"",new_psd:"",psd_changedia:!1,inputa_avatar:"",icons:"",isBtnok:!1,lange:this.$q.cookies.get("lang"),length_name:"",length_intro:"",show_ln:!1,show_li:!1,icon:"",token:"",userinfoStr:""}},computed:{personal_center(){return JSON.parse(JSON.stringify(this.$store.state.bbsChange.user_info))}},methods:{modifyPreinfo(){var e=this,n=new FormData;n.append("nickname",e.personal_center.nickname),n.append("intro",e.personal_center.intro),n.append("icon",e.icons),e.$q.cookies.has("token")&&(0,N.putauth)("/user/api/v1/userdetail/"+e.token.user_id+"/",n).then((n=>{if(200===n.code){var s={refresh:e.$q.cookies.get("token_ref")};(0,N.postauth)("/token/refresh/",s).then((n=>{e.$q.cookies.set("token",n.access)})).catch((n=>{e.$q.notify({message:n.detail,icon:"close",color:"negative"})})),e.userinfoStr=(0,G.Z)(e.$q.cookies.get("token")),e.icon=e.userinfoStr.icon,e.personal_center.nickname=e.userinfoStr.nickname,e.personal_center.intro=e.userinfoStr.intro;let n={id:e.userinfoStr.user_id,nickname:e.userinfoStr.nickname,intro:e.userinfoStr.intro,icon:e.userinfoStr.icon,email:e.userinfoStr.email,username:e.userinfoStr.username};e.$store.dispatch("bbsChange/userInfoChange",n),e.$q.notify({message:e.$t("community.change_suc"),icon:"check",color:"green"}),location.reload()}else e.$q.notify({message:e.$t("community.change_err"),icon:"close",color:"negative"})})).catch((n=>{e.$q.notify({message:n.detail,icon:"close",color:"negative"})}))},click_avatar(){var e=this;e.$refs.fileRef.dispatchEvent(new MouseEvent("click"))},search(e){var n=this;n.icons=e.target.files[0];var s=new FileReader;s.onload=function(e){n.icon=s.result},n.$q.notify({message:n.$t("community.confirm_avatar"),icon:"check",color:"green"}),s.readAsDataURL(e.target.files[0])},getcpsd_ver(){var e=this;(0,N.getauth)("/user/api/v1/pwd_codes/?email="+e.$store.state.bbsChange.user_info.email).then((n=>{e.$q.notify({message:"验证码发送成功",icon:"check",color:"green"}),e.isverify=!0})).catch((n=>{e.$q.notify({message:n.detail,icon:"close",color:"negative"})}))},change_subPsd(){var e=this,n={};n["email"]=e.$store.state.bbsChange.user_info.email,n["code"]=e.ver_code,n["password"]=e.new_psd,n["re_password"]=e.confirm_psd,(0,N.postauth)("/user/api/v1/putpwd/",n).then((n=>{200===n.code&&(e.$q.notify({message:e.$t("community.edit_suc_relogin"),icon:"check",color:"green"}),e.logout_sub())})).catch((n=>{e.$q.notify({message:n.detail,icon:"close",color:"negative"})}))},logout_sub(){var e=this;e.$q.cookies.remove("token"),e.$store.dispatch("bbsChange/loginChange",!1),e.isIndexMenu=!0;let n={id:"",icon:"",nickname:"",intro:"",email:""};e.$store.dispatch("bbsChange/userInfoChange",n),e.$router.push({path:"/community/GreaterWMS"})},getSubBtn(){var e=this;6===e.ver_code.length&&e.new_psd.length>=8&&e.confirm_psd.length>=8?e.isBtnok=!0:e.isBtnok=!1},show_name_len(){var e=this;e.show_ln=!0,e.length_name=e.personal_center.nickname.length},show_intro_len(){var e=this;e.show_li=!0,e.length_intro=e.personal_center.intro.length}},mounted(){this.$q.cookies.has("token")&&(this.token=(0,G.Z)(this.$q.cookies.get("token")),this.icon=window.g.BaseUrl+this.token.icon),this.$store.dispatch("bbsChange/isIndexMenu",!1),this.$store.dispatch("bbsChange/link","changePsd")}});var L=s(4260),Y=s(151),T=s(5589),X=s(5096),ee=s(4027),ne=s(2165),se=s(6778),te=s(4842),le=s(7518),oe=s.n(le);const ie=(0,L.Z)(H,[["render",J],["__scopeId","data-v-3838325c"]]),ae=ie;oe()(H,"components",{QCard:Y.Z,QCardSection:T.Z,QAvatar:X.Z,QImg:ee.Z,QBtn:ne.Z,QDialog:se.Z,QInput:te.Z})}}]);