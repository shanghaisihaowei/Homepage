"use strict";(self["webpackChunktemplates"]=self["webpackChunktemplates"]||[]).push([[45],{6315:(t,e,i)=>{i.r(e),i.d(e,{default:()=>b});var s=i(3673),o=i(2323);const n={class:"bg-white"},l={class:"q-px-md"},a=["href"],r={key:0,style:{color:"white"}},u={key:1,style:{color:"white"}},d=["innerHTML"];function m(t,e,i,m,c,h){const p=(0,s.up)("q-btn"),g=(0,s.up)("q-card"),w=(0,s.up)("plugins-list"),_=(0,s.up)("timeline"),f=(0,s.up)("comment-list");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(g,{square:"",flat:"",style:{color:"#999999"},class:"bottom_border q-py-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"text-body1",onClick:e[0]||(e[0]=t=>this.$router.go(-1)),flat:""},{default:(0,s.w5)((()=>[(0,s.Uk)(" <"+(0,o.zw)(t.$t("community.e_shop_view.back")),1)])),_:1})])),_:1}),(0,s.Wm)(w,{isFree:t.isFree,alreadyBought:t.alreadyBought,pluginList:t.pluginList,ref:"pluginsList"},null,8,["isFree","alreadyBought","pluginList"]),(0,s._)("div",l,[(0,s.Wm)(g,{square:"",flat:"",class:"q-py-md top_border text-h6"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.$t("community.e_shop_view.download")),1)])),_:1})]),(0,s._)("a",{target:"_blank",href:t.downloadUrl,onClick:e[1]||(e[1]=e=>t.checkDownloadStatus(e)),style:(0,o.j5)({height:"70px",fontSize:"24px",backgroundImage:t.imageUrl,background:"noRepeat",backgroundSize:"100%",cursor:"pointer",textDecoration:"none"}),class:"text-white q-mx-md flex flex-center"},[t.isFree?((0,s.wg)(),(0,s.iD)("div",r,(0,o.zw)(t.$t("community.e_shop_view.click_download")),1)):(0,s.kq)("",!0),t.isFree?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",u,(0,o.zw)(t.alreadyBought?t.$t("community.e_shop_view.download_btn_text"):t.$t("community.e_shop_view.unbought_btn_text")),1))],12,a),(0,s.Wm)(g,{square:"",flat:"",class:"text-h6 q-px-md q-pt-lg"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.$t("community.e_shop_view.update_record")),1)])),_:1}),(0,s.Wm)(_,{timeline:t.timeline},null,8,["timeline"]),(0,s.Wm)(g,{square:"",flat:"",class:"text-h6 q-px-md"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.$t("community.e_shop_view.plugin_introduce")),1)])),_:1}),(0,s._)("div",{class:"markdown q-px-md q-pt-md text-body1",innerHTML:t.pluginList[0].direction_for_use},null,8,d),(0,s.Wm)(g,{square:"",flat:"",class:"text-h6 q-px-md q-pt-lg"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.$t("community.e_shop_view.add_comment")),1)])),_:1}),(0,s.Wm)(f,{commentList:t.commentList,userId:t.userId},null,8,["commentList","userId"])])}var c=i(7226),h=i(3746),p=i(4942),g=i(5474);const w=(0,s.aZ)({components:{PluginsList:c.Z,CommentList:p.Z,Timeline:h.Z},data(){return{pluginId:"",userId:"",pluginList:[{brief:"",user:{icon:""}}],timeline:"",commentList:[],alreadyBought:!1}},computed:{imageUrl(){return this.alreadyBought||this.isFree?"url('statics/purchased.svg')":"url('statics/unpurchased.svg')"},isFree(){return 0==this.pluginList[0].dollar&&0==this.pluginList[0].rnb},downloadUrl(){return`${window.g.BaseUrl}software/api/v1/downzip/`+this.pluginId+"/?token="+this.$q.cookies.get("token")}},methods:{getPluginDetail(){(0,g.get)("software/api/v1/softwaregetret/"+this.pluginId+"/").then((t=>{this.pluginList=[],this.pluginList.push(t),this.timeline=t.versions,this.commentList=t.comment,this.userId=t.user.id}))},changeBuyStatus(){this.$q.cookies.get("token")&&(0,g.getauth)("order/api/v1/order_status/?software="+this.pluginId).then((t=>{t.status?this.alreadyBought=!0:this.alreadyBought=!1}))},checkDownloadStatus(t){this.alreadyBought||this.isFree?this.isFree&&!this.$q.cookies.get("token")&&(t.preventDefault(),this.$q.notify({message:this.$t("community.e_shop_view.unlogin_tip"),icon:"close",color:"negative"})):t.preventDefault()}},created(){this.pluginId=this.$route.params.id,this.changeBuyStatus(),this.getPluginDetail(),document.body.scrollTop=0},mounted(){this.$refs.pluginsList.showBtnHandler(!0)}});var _=i(4260),f=i(151),y=i(2165),k=i(7518),v=i.n(k);const q=(0,_.Z)(w,[["render",m]]),b=q;v()(w,"components",{QCard:f.Z,QBtn:y.Z})}}]);